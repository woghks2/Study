# **\[파이썬\] 백준 11658 : 구간 합 구하기 3 (플레5)**

* [구간 합 구하기 3](https://www.acmicpc.net/problem/11658)

---

## **풀이**

### **방향성 생각**

* 세그트리 기본

* 구간합 구하는데는 펜윅트리가 더 빠르다고 해서 펜윅트리로 풀이

* 둘 다 1-based로 맞춰주고 시작하기.

---

### **전체코드**

```python
import sys
input = sys.stdin.readline

N,M = map(int,input().split())
arr = [[0]*(N+1)] + [[0] + list(map(int,input().split())) for _ in range(N)]
tree = [[0]*(N+1) for _ in range(N+1)]

def update(x,y,diff):
    i = y
    while i<=N:
        j = x
        while j <= N:
            tree[i][j] += diff
            j += j & -j
        i += i & -i

def cumsum(x,y):
    result = 0
    i = y
    while i:
        j = x
        while j:
            result += tree[i][j]
            j -= j & -j
        i -= i & -i
    return result

def range_sum(x1,y1,x2,y2):
    return cumsum(x2,y2) - cumsum(x2,y1-1) - cumsum(x1-1,y2) + cumsum(x1-1,y1-1)

for y in range(1,N+1):
    for x in range(1,N+1):
        update(x,y,arr[y][x])

for _ in range(M):
    cmd,*info = list(map(int,input().split()))
    if not cmd:
        y,x,val = info
        diff = val - arr[y][x]
        arr[y][x] = val
        update(x,y,diff)
    else:
        y1,x1,y2,x2 = info
        print(range_sum(x1,y1,x2,y2))
```

### **코멘트**

* 홀수들은 자기 자신 정보만

* 짝수들은 특정 구간합을 가지고 있다.

* [Reference](https://www.youtube.com/watch?v=fg2iGP4e2mc&ab_channel=%EB%8F%99%EB%B9%88%EB%82%98)
