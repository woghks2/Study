# **\[파이썬\] 백준 5676 : 음주 코딩 (골드1)**

* [백준 5676 : 음주 코딩](https://www.acmicpc.net/problem/5676)

---

## **풀이**

### **방향성 생각**

* 세그트리

* 곱셈 값들의 부호 -> 세그트리에는 부호만 저장하기

---

### **전체코드**

```python
import sys
input = lambda : sys.stdin.readline().strip()
SIGN = lambda x: (x>0) - (x<0) 
CVT = {1:'+',-1:'-',0:'0'}

def build(x,s,e):
    if s==e:
        segtree[x] = arr[s]
        return segtree[x]
    m = (s+e)//2
    lv = build(2*x+1,s,m)
    rv = build(2*x+2,m+1,e)
    segtree[x] = lv * rv
    return segtree[x]
    
def update(x,s,e,idx,val):
    if s==e:
        arr[idx] = val
        segtree[x] = arr[idx]
        return segtree[x]
    m = (s+e)//2
    if idx<=m:
        lv = update(2*x+1,s,m,idx,val)
        rv = segtree[2*x+2]
    else:
        lv = segtree[2*x+1]
        rv = update(2*x+2,m+1,e,idx,val)
    segtree[x] = lv * rv
    return segtree[x]

def query(x,s,e,l,r):
    if l<=s and e<=r:
        return segtree[x]
    if e<l or s>r:
        return 1
    m = (s+e)//2
    lv = query(2*x+1,s,m,l,r)
    rv = query(2*x+2,m+1,e,l,r)
    return lv * rv

while True:
    try:
        N,K = map(int,input().split())
        arr = list(map(lambda x: SIGN(int(x)),input().split()))
        segtree = [0]*(4*N)
        build(0,0,N-1)
        for _ in range(K):
            cmd,*temp = list(input().split())
            a,b = map(int,temp)
            if cmd == 'C':
                update(0,0,N-1,a-1,SIGN(b))
            elif cmd == 'P':
                answer = query(0,0,N-1,a-1,b-1)
                print(CVT[answer], end='')
    except:
        break
    print()
```

### **코멘트**

* 각 세그트리의 노드에 저장하는 값들을 최대한 줄이기
